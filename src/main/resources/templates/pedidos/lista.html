<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pedidos</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

<style>
body {
	background-color: #f8f9fa;
}

.navbar {
	background-color: #1f4e78 !important;
}

.table-hover tbody tr:hover {
	background-color: #f0f8ff;
}

.btn-primary {
	background-color: #1f4e78;
	border-color: #1f4e78;
}

.btn-primary:hover {
	background-color: #163a5a;
}

.card {
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.fab {
	position: fixed;
	bottom: 20px;
	right: 20px;
	width: 60px;
	height: 60px;
	background-color: #0d6efd;
	border-radius: 50%;
	color: white;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 30px;
	cursor: pointer;
	z-index: 9999;
}

.fab:hover {
	background-color: #0b5ed7;
}
</style>




</head>
<body>
	<div class="fab" data-bs-toggle="modal" data-bs-target="#modalPedidos">
		<i class="bi bi-list-ul"></i>
	</div>

	<div th:insert="~{components/navbar :: navbar}"></div>

	<div class="container mt-4">
		<div class="row mb-4">
			<div class="col-md-6">
				<h2>
					<i class="fas fa-user-tie"></i> Gestión de Pedidos
				</h2>
			</div>
			<div class="col-md-6 text-end">
				<a href="/api/web/pedidos/nuevo" class="btn btn-primary"> <i
					class="fas fa-plus"></i> Nuevo Pedido
				</a>
			</div>
		</div>

		<div class="card">
			<div class="card-body">
				<table class="table table-hover table-striped">
					<thead class="table-light">
						<tr>
							<th><i class="fas fa-hashtag"></i> ID</th>
							<th><i class="fas fa-date"></i> Fecha</th>
							<th><i class="fas fa-name"></i> Total</th>
							<th><i class="fas fa-user"></i> Usuario</th>
							<th>Acciones</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="pedido : ${pedidos}">
							<td th:text="${pedido.id}"></td>
							<td th:text="${pedido.fecha}"></td>
							<td th:text="${pedido.total}"></td>
							<td th:text="${pedido.usuario.rol.descripcion}"></td>

							<td><a
								th:href="@{/web/pedidos/{id}/editar(id=${pedido.id})}"
								class="btn btn-sm btn-warning" title="Editar"> <i
									class="fas fa-edit"></i>
							</a> <a th:href="@{/web/pedidos/{id}/eliminar(id=${pedido.id})}"
								class="btn btn-sm btn-danger" title="Eliminar"
								onclick="return confirm('¿Estás seguro de eliminar esta categoria?')">
									<i class="fas fa-trash"></i>
							</a></td>
						</tr>
						<tr th:if="${#lists.isEmpty(pedidos)}">
							<td colspan="6" class="text-center text-muted py-4">No hay
								pedidos registrados. <a href="/api/web/pedidos/nuevo">Crear
									uno ahora</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

		<!--<div class="modal fade" id="modalPedidos" tabindex="-1"
		aria-labelledby="modalPedidosLabel" aria-hidden="true">
		<div class="modal-dialog modal-xl">
			<div class="modal-content">

				<div class="modal-header">
					<h5 class="modal-title" id="modalPedidosLabel">Listado de
						Pedidos</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
				</div>

				<div class="modal-body">

					<table class="table table-bordered table-striped">
						<thead>
							<tr>
								<th>ID</th>
								<th>Fecha</th>
								<th>Cliente</th>
								<th>Total</th>
								<th>Acciones</th>
							</tr>
						</thead>

						<tbody>
							<tr th:each="p : ${pedidos}">
								<td th:text="${p.id}"></td>
								<td th:text="${p.fecha}"></td>
								<td
									th:text="${
       p.usuario.tipoUsuario == 'N' ? 
       p.usuario.natural.nombre : 
       p.usuario.juridica.RSO
}"></td>

								<td th:text="${p.total}"></td>
								<td><a th:href="@{'/web/pedidos/' + ${p.id}}"
									class="btn btn-primary btn-sm"> Ver detalle </a></td>
							</tr>
						</tbody>

					</table>

				</div>

				<div class="modal-footer">
					<button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
				</div>

			</div>
		</div>
	</div>-->
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
